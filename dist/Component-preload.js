//@ui5-bundle sap/vic/dashboard/Component-preload.js
sap.ui.require.preload({
	"sap/vic/dashboard/Component.js":function(){
sap.ui.define(["sap/ui/core/UIComponent","sap/ui/Device","sap/vic/dashboard/model/models","sap/ui/model/json/JSONModel","sap/m/MessageToast"],function(e,t,a,i,o){"use strict";return e.extend("sap.vic.dashboard.Component",{metadata:{manifest:"json"},init:function(){e.prototype.init.apply(this,arguments);this.getRouter().initialize();this.setModel(a.createDeviceModel(),"device");var t=new i({headerExpanded:true,liveMode:false});this.setModel(t,"state");var s=this.getModel();if(s&&typeof s.metadataLoaded==="function"){s.metadataLoaded().then(function(){t.setProperty("/liveMode",true);try{o.show("OData service connected â€” Live mode")}catch(e){}this.getEventBus().publish("vic","odataAvailable")}.bind(this)).catch(function(){})}}})});
},
	"sap/vic/dashboard/controller/App.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller"],function(n){"use strict";return n.extend("sap.vic.dashboard.controller.App",{onInit:function(){}})});
},
	"sap/vic/dashboard/controller/Dashboard.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/core/Fragment","sap/viz/ui5/controls/VizFrame","sap/viz/ui5/data/FlattenedDataset","sap/viz/ui5/controls/common/feeds/FeedItem","sap/ui/export/library","sap/ui/export/Spreadsheet"],function(e,t,a,r,n,i,o,s){"use strict";return e.extend("sap.vic.dashboard.controller.Dashboard",{onInit:function(){var e=new t({headerExpanded:true});this.getView().setModel(e,"state");var a=new t({view:"chart"});this.getView().setModel(a,"view");var r=new t;r.loadData("model/mockData.json");r.attachRequestCompleted(function(){var e=r.getProperty("/ChartData")||[];r.setProperty("/ChartDataFull",e.slice(0));r.setProperty("/ChartData",e.slice(0));this._updatePieChartData(e)}.bind(this));this.getView().setModel(r,"mock");this.getOwnerComponent().getEventBus().subscribe("vic","odataAvailable",this._onODataAvailable,this);this.getView().attachAfterRendering(function(){var e=this.getView().byId("pieChart");e.setVizProperties({title:{text:"Data by Product Area (Pie)"}});var t=this.getView().byId("columnChart");t.setVizProperties({title:{text:"Data by Product Area (Column)"}});var a=this.getView().byId("idPopOver");if(a){a.connect(e.getVizUid());a.connect(t.getVizUid())}}.bind(this))},onValueHelpRequested:function(e){var t=e.getSource().getId();var r=this.getView();if(t.includes("testType")){if(!this._pValueHelpDialog){this._pValueHelpDialog=a.load({id:r.getId(),name:"sap.vic.dashboard.view.ValueHelpDialog",controller:this}).then(function(e){r.addDependent(e);return e})}this._pValueHelpDialog.then(function(e){e.open()})}else if(t.includes("testPlan")){if(!this._pTestPlanValueHelpDialog){this._pTestPlanValueHelpDialog=a.load({id:r.getId(),name:"sap.vic.dashboard.view.TestPlanValueHelpDialog",controller:this}).then(function(e){r.addDependent(e);return e})}this._pTestPlanValueHelpDialog.then(function(e){e.open()})}},onValueHelpOkPress:function(e){var t=e.getParameter("tokens");var a=this._getFieldName(e.getSource().getId());var r=this.byId(a);r.setTokens(t);e.getSource().close()},onValueHelpCancelPress:function(e){e.getSource().close()},onSearch:function(e){var t=this.byId("testTypeSelect");var a=this.byId("testPlanSelect");var r=this.byId("dateRange");var n=t.getSelectedKey();var i=a.getSelectedKey();var o=r.getDateValue();var s=r.getSecondDateValue();if(this._isLiveMode()){var l=[];if(n){l.push("SDDocumentCategory eq '"+encodeURIComponent(n)+"'")}if(o){l.push("WeekOfOrder ge '"+this._fmtDate(o)+"'")}if(s){l.push("WeekOfOrder le '"+this._fmtDate(s)+"'")}var u=l.join(" and ");var d=this.getOwnerComponent().getModel();var c=this;d.read("/ZI_VIC_UnconfirmedDemandSet",{urlParameters:u?{$filter:u,$format:"json"}:{$format:"json"},success:function(e){var t=c._transformToChartData(e.results||[]);var a=c.getView().getModel("mock");a.setProperty("/ChartData",t);a.setProperty("/ChartDataFull",t.slice(0));c._updatePieChartData(t)},error:function(e){}});return}var p=this.getView().getModel("mock");var h=p.getProperty("/TestPlans")||[];var m=h.filter(function(e){var t=n?e.testType===n:true;var a=i?e.id===i:true;return t&&a});var g=[];var f=p.getProperty("/ChartDataFull")||p.getProperty("/ChartData")||[];m.forEach(function(e){var t=f.find(function(t){return t.ProductArea===e.productArea});if(t){g.push(t)}});p.setProperty("/ChartData",g);this._updatePieChartData(g)},_updatePieChartData:function(e){var t=this.getView().getModel("mock");if(!t){return}var a=e||t.getProperty("/ChartData");if(!a){return}var r={Sim100:0,Sim99:0,SimLess:0};a.forEach(function(e){r.Sim100+=e.Sim100||0;r.Sim99+=e.Sim99||0;r.SimLess+=e.SimLess||0});var n=[{Status:"Sim100",Count:r.Sim100},{Status:"Sim99",Count:r.Sim99},{Status:"SimLess",Count:r.SimLess}];t.setProperty("/PieChartData",n)},_isLiveMode:function(){var e=this.getOwnerComponent().getModel("state");return e&&e.getProperty("/liveMode")},_onODataAvailable:function(){var e=this.getOwnerComponent().getModel();var t=this;var a="/ZI_VIC_UnconfirmedDemandSet";e.read(a,{urlParameters:{$top:"200",$format:"json"},success:function(e){var a=t._transformToChartData(e.results||[]);var r=t.getView().getModel("mock");r.setProperty("/ChartData",a);r.setProperty("/ChartDataFull",a.slice(0));t._updatePieChartData(a)},error:function(){}})},_transformToChartData:function(e){return(e||[]).map(function(e){return{ProductArea:e.SDDocumentCategory||e.ProductArea||"N/A",Sim100:Number(e.ConfirmedDemand)||0,Sim99:Number(e.DelayedDemand)||0,SimLess:Number(e.UnconfirmedDemand)||0}})},_fmtDate:function(e){var t=function(e){return e<10?"0"+e:e};return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())},onReset:function(e){},onChartSelectChange:function(e){},_getFieldName:function(e){if(e.includes("testType")){return"testTypeInput"}else if(e.includes("testPlan")){return"testPlanInput"}},onTestTypeChange:function(e){var a=e.getParameter("selectedItem").getKey();var r=this.byId("testPlanSelect");var n=this.getView().getModel("mock");var i=n.getProperty("/TestPlans")||[];var o=i.filter(function(e){return e.testType===a});r.bindItems({path:"testPlan>/TestPlans",template:new sap.ui.core.Item({key:"{testPlan>id}",text:"{testPlan>name}"})});r.setModel(new t({TestPlans:o}),"testPlan");r.setEnabled(true)},onViewChange:function(e){var t=e.getParameter("key");this.getView().getModel("view").setProperty("/view",t)},createColumnConfig:function(){return[{label:"Product Area",property:"ProductArea",type:"string"},{label:"Sim 100",property:"Sim100",type:"number"},{label:"Sim 99",property:"Sim99",type:"number"},{label:"Sim Less",property:"SimLess",type:"number"}]},onExport:function(){var e=this.byId("tableView");var t=e.getBinding("items");var a=this.createColumnConfig();if(!t){sap.m.MessageToast.show("No data to export.");return}var r=t.getModel();var n=r.getProperty(t.getPath());if(!n||n.length===0){sap.m.MessageToast.show("No data to export.");return}var i={workbook:{columns:a},dataSource:n,fileName:"DashboardData.xlsx",worker:false};var o=new s(i);o.build().then(function(){sap.m.MessageToast.show("Data exported successfully.")}).finally(function(){o.destroy()})}})});
},
	"sap/vic/dashboard/i18n/i18n.properties":'appTitle=VIC Dashboard\r\nappDescription=Visual Comparison Dashboard\r\n',
	"sap/vic/dashboard/manifest.json":'{"_version":"1.32.0","sap.app":{"id":"sap.vic.dashboard","type":"application","i18n":"i18n/i18n.properties","title":"{{appTitle}}","description":"{{appDescription}}","applicationVersion":{"version":"1.0.0"},"dataSources":{"mainService":{"uri":"/sap/opu/odata/sap/ZVIC_SRV/","type":"OData","settings":{"odataVersion":"2.0"}},"mockData":{"uri":"model/mockData.json","type":"JSON"}}},"sap.ui":{"technology":"UI5","icons":{},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"rootView":{"viewName":"sap.vic.dashboard.view.App","type":"XML","async":true,"id":"app"},"dependencies":{"minUI5Version":"1.90.0","libs":{"sap.ui.core":{},"sap.m":{},"sap.f":{},"sap.ui.comp":{},"sap.viz":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"sap.vic.dashboard.i18n.i18n"}},"":{"dataSource":"mainService","type":"sap.ui.model.odata.v2.ODataModel","settings":{"defaultBindingMode":"OneWay"}},"mock":{"dataSource":"mockData","type":"sap.ui.model.json.JSONModel","preload":true}},"routing":{"config":{"routerClass":"sap.m.routing.Router","viewType":"XML","viewPath":"sap.vic.dashboard.view","controlId":"app","controlAggregation":"pages","async":true},"routes":[{"pattern":"","name":"dashboard","target":"dashboard"}],"targets":{"dashboard":{"viewId":"dashboard","viewName":"Dashboard"}}}}}',
	"sap/vic/dashboard/model/models.js":function(){
sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
},
	"sap/vic/dashboard/view/App.view.xml":'<mvc:View\r\n    controllerName="sap.vic.dashboard.controller.App"\r\n    xmlns:mvc="sap.ui.core.mvc"\r\n    displayBlock="true"\r\n    xmlns="sap.m"><App id="app"/></mvc:View>\r\n',
	"sap/vic/dashboard/view/Dashboard.view.xml":'<mvc:View\r\n    controllerName="sap.vic.dashboard.controller.Dashboard"\r\n    xmlns="sap.m"\r\n    xmlns:mvc="sap.ui.core.mvc"\r\n    xmlns:l="sap.ui.layout"\r\n    xmlns:f="sap.f"\r\n    xmlns:fb="sap.ui.comp.filterbar"\r\n    xmlns:viz="sap.viz.ui5.controls"\r\n    xmlns:viz.data="sap.viz.ui5.data"\r\n    xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds"\r\n    xmlns:core="sap.ui.core"><f:DynamicPage id="dynamicPageId"\r\n                   headerExpanded="{state>/headerExpanded}"><f:title><f:DynamicPageTitle><f:heading><Title text="VIC Dashboard"/></f:heading></f:DynamicPageTitle></f:title><f:header><f:DynamicPageHeader><f:content><fb:FilterBar id="filterbar" useToolbar="false" search="onSearch" showGoOnFB="true"><fb:filterGroupItems><fb:FilterGroupItem groupName="primary" name="testType" label="Test Type" visibleInFilterBar="true"><fb:control><Select id="testTypeSelect" items="{mock>/TestTypes}" change="onTestTypeChange"><core:Item key="{mock>text}" text="{mock>text}" /></Select></fb:control></fb:FilterGroupItem><fb:FilterGroupItem groupName="primary" name="testPlan" label="Test Plan" visibleInFilterBar="true"><fb:control><Select id="testPlanSelect" enabled="false"></Select></fb:control></fb:FilterGroupItem><fb:FilterGroupItem groupName="primary" name="date" label="Date" visibleInFilterBar="true"><fb:control><DateRangeSelection id="dateRange"/></fb:control></fb:FilterGroupItem></fb:filterGroupItems></fb:FilterBar></f:content></f:DynamicPageHeader></f:header><f:content><OverflowToolbar><ToolbarSpacer/><SegmentedButton id="viewSwitch" selectedKey="chart" selectionChange="onViewChange"><items><SegmentedButtonItem text="Chart View" key="chart" icon="sap-icon://bar-chart" tooltip="Switch to Chart View"/><SegmentedButtonItem text="Table View" key="table" icon="sap-icon://table-view" tooltip="Switch to Table View"/></items></SegmentedButton><Button icon="sap-icon://excel-attachment" tooltip="Export to Excel" press="onExport" /></OverflowToolbar><viz:Popover id="idPopOver"></viz:Popover><l:Grid\r\n                id="chartsGrid"\r\n                visible="{= ${view>/view} === \'chart\' }"\r\n                defaultSpan="L6 M6 S12"\r\n                class="sapUiSmallMarginTop"><viz:VizFrame id="pieChart" uiConfig="{applicationSet:\'fiori\'}"\r\n                    height=\'400px\' width="100%" vizType=\'pie\'\r\n                    vizProperties="{\r\n                        title: { text: \'Test Status Distribution\' },\r\n                        plotArea: {\r\n                            dataLabel: {\r\n                                visible: true\r\n                            }\r\n                        }\r\n                    }"><viz:dataset><viz.data:FlattenedDataset data="{mock>/PieChartData}"><viz.data:dimensions><viz.data:DimensionDefinition name="Status"\r\n                                    value="{Status}" /></viz.data:dimensions><viz.data:measures><viz.data:MeasureDefinition name="Count"\r\n                                    value="{Count}" /></viz.data:measures></viz.data:FlattenedDataset></viz:dataset><viz:feeds><viz.feeds:FeedItem id=\'pieChartSizeFeed\' uid="size" type="Measure"\r\n                            values="Count" /><viz.feeds:FeedItem id=\'pieChartColorFeed\' uid="color" type="Dimension"\r\n                            values="Status" /></viz:feeds></viz:VizFrame><viz:VizFrame id="columnChart" uiConfig="{applicationSet:\'fiori\'}"\r\n                    height=\'400px\' width="100%" vizType=\'column\'\r\n                    vizProperties="{\r\n                        title: { text: \'Tests by Product Area\' },\r\n                        plotArea: {\r\n                            dataLabel: {\r\n                                visible: true\r\n                            }\r\n                        }\r\n                    }"><viz:dataset><viz.data:FlattenedDataset data="{mock>/ChartData}"><viz.data:dimensions><viz.data:DimensionDefinition name="ProductArea"\r\n                                    value="{ProductArea}" /></viz.data:dimensions><viz.data:measures><viz.data:MeasureDefinition name="Sim100"\r\n                                    value="{Sim100}" /><viz.data:MeasureDefinition name="Sim99"\r\n                                    value="{Sim99}" /><viz.data:MeasureDefinition name="SimLess"\r\n                                    value="{SimLess}" /></viz.data:measures></viz.data:FlattenedDataset></viz:dataset><viz:feeds><viz.feeds:FeedItem id=\'columnChartValueAxisFeed\' uid="valueAxis" type="Measure"\r\n                            values="Sim100,Sim99,SimLess" /><viz.feeds:FeedItem id=\'columnChartCategoryAxisFeed\' uid="categoryAxis" type="Dimension"\r\n                            values="ProductArea" /></viz:feeds></viz:VizFrame></l:Grid><Table\r\n                id="tableView"\r\n                visible="{= ${view>/view} === \'table\' }"\r\n                items="{mock>/ChartData}"\r\n                class="sapUiResponsiveMargin"\r\n                width="auto"><headerToolbar><Toolbar><Title text="Data"/><ToolbarSpacer /><Button icon="sap-icon://excel-attachment" tooltip="Export to Excel" press="onExport" /></Toolbar></headerToolbar><columns><Column><Text text="Product Area" /></Column><Column hAlign="End"><Text text="Sim 100" /></Column><Column hAlign="End"><Text text="Sim 99" /></Column><Column hAlign="End"><Text text="Sim Less" /></Column></columns><items><ColumnListItem><cells><Text text="{mock>ProductArea}" /><ObjectNumber number="{mock>Sim100}" /><ObjectNumber number="{mock>Sim99}" /><ObjectNumber number="{mock>SimLess}" /></cells></ColumnListItem></items></Table></f:content></f:DynamicPage></mvc:View>\r\n'
});
//# sourceMappingURL=Component-preload.js.map
